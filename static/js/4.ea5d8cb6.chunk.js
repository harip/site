(this["webpackJsonphp-profile"]=this["webpackJsonphp-profile"]||[]).push([[4],{280:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),i=n.n(c),s=n(15),o=n(32),l=n(12),u=n(57),j=n(30),b=n(2),d={posts:null,error:!1,retry:function(){},save:function(){},addNewBlog:function(){},saveComment:function(){}},p=r.a.createContext(d),m=function(e){var t=e.children,n=Object(a.useContext)(j.b),r=Object(a.useState)(null),c=Object(l.a)(r,2),d=c[0],m=c[1];function x(){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=!1,e.prev=2,e.next=5,u.a.get("/post");case 5:a=e.sent,t=a.data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n=!0;case 12:m({posts:t,error:n});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(a.useEffect)((function(){x()}),[]);var O=function(){var e=Object(o.a)(i.a.mark((function e(t,a){var r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(a._id=t),e.prev=1,e.next=4,u.a.put("/post",Object(s.a)(Object(s.a)({},a),{},{token:n.token}));case 4:return r=Object(s.a)({},d),c=r.posts,(o=c.findIndex((function(e){return e._id==="".concat(t)})))>=0&&(c.splice(o,1,a),m({posts:c,error:!1})),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={title:"",subTitle:"",content:"Enter text"},r=Object(s.a)({},d),(c=r.posts).unshift(a),m({posts:c,error:!1}),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.patch("/post",n);case 3:return e.sent,e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(b.jsx)(p.Provider,{value:Object(s.a)(Object(s.a)({},d),{},{retry:function(){return x()},addNewBlog:h,save:O,saveComment:g}),children:t})},x=p,f=n(250),O=n(252),h=n(274),g=n.n(h),v=n(236),y=n(248),w=n(237),C=n(249),k=n(36),N=n(276),T=[{title:"Image Left",selector:"pre",styles:{float:"left",margin:"0 10px 0 10px"}}],S=function(e){var t=e.post,n=Object(a.useState)(t.content),r=Object(l.a)(n,2),c=r[0],i=r[1];return Object(b.jsx)(N.a,{id:"codeEditor",apiKey:"wefhnu0ma6zh07117uwxwjj5ila4m1d1y16pp4e59wbc6log",initialValue:c,init:{height:500,style_formats:T,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code codesample image"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | codesample | image | code"},onEditorChange:function(e,n){i(e),t.newContent=e}})},B=n(278),I=n(235),_=n(270),A=n.n(_),L=n(271),F=n.n(L),E=n(255),H=n(269),z=n.n(H),W=n(115),M=n(275),P=n(185),R=Object(P.a)((function(e){return{card:{marginRight:5,marginBottom:5},post:{marginTop:30},root:{margin:10,display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5)},fabAddBlog:{marginTop:10,position:"fixed",marginLeft:"auto",zIndex:999},contactHeader:{fontSize:20,borderBottom:2,background:"#ffa602"},cardActions:{borderTop:"solid 1px #f9f5ee"},crudButtons:{marginLeft:"auto"},wrapper:{margin:e.spacing(1),position:"relative"},commentBox:{width:"100%"}}})),D=function(e){var t=Object(a.useContext)(j.b),n=Object(a.useContext)(x),c=Object(a.useState)(!1),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(a.useState)(""),p=Object(l.a)(d,2),m=p[0],f=p[1],O=Object(a.useState)(!1),h=Object(l.a)(O,2),g=h[0],N=h[1],T=R(),_=e.item,L=Object(M.a)({initialValues:{title:_.title,subTitle:_.subTitle,content:_.content},onSubmit:function(e){console.log(e)}}),H=function(){return t.isLoggedIn()?Object(b.jsx)(B.a,{type:"submit",color:"primary","aria-label":"outlined primary button group",className:T.crudButtons,children:o?Object(b.jsx)(I.a,{"aria-label":"save",onClick:function(){return P()},color:"primary",children:Object(b.jsx)(F.a,{})}):Object(b.jsx)(I.a,{"aria-label":"edit",onClick:function(){return u(!o)},children:Object(b.jsx)(A.a,{})})}):null},P=function(){var t=Object(s.a)(Object(s.a)({},e.item),{},{title:L.values.title,subTitle:L.values.subTitle,content:e.item.newContent?e.item.newContent:e.item.content});n.save(e.item._id,t)&&u(!o)},D=function(){N(!0),n.saveComment(e.item._id,{_id:e.item._id,text:m}),N(!1)},J=function(e){f(e.target.value)};return Object(b.jsx)(r.a.Fragment,{children:(e.item,Object(b.jsx)("div",{className:T.wrapper,children:Object(b.jsx)("div",{className:T.card,children:o?Object(b.jsx)("form",{onSubmit:L.handleSubmit,children:Object(b.jsxs)(v.a,{children:[Object(b.jsx)(y.a,{className:T.contactHeader,title:Object(b.jsxs)(r.a.Fragment,{children:[Object(b.jsx)(E.a,{autoFocus:!0,margin:"dense",id:"postTitle",label:"title",name:"title",type:"text",fullWidth:!0,value:L.values.title,onChange:L.handleChange}),Object(b.jsx)(E.a,{margin:"dense",name:"subTitle",id:"postSubTitle",label:"subTitle",type:"text",fullWidth:!0,value:L.values.subTitle,onChange:L.handleChange})]}),action:H()}),Object(b.jsx)(w.a,{children:Object(b.jsx)("div",{id:"container",children:Object(b.jsx)(S,{post:_})})}),Object(b.jsxs)(C.a,{className:T.cardActions,children:[Object(b.jsx)(z.a,{}),Object(b.jsx)(E.a,{id:"standard-multiline-flexible",label:"add comment",className:T.commentBox,multiline:!0,rowsMax:4,value:m,onChange:J}),Object(b.jsx)(W.a,{buttonProps:{text:"Save",onClick:D,loading:g}})]})]})}):Object(b.jsxs)(v.a,{children:[Object(b.jsx)(y.a,{className:T.contactHeader,title:Object(b.jsxs)(r.a.Fragment,{children:[Object(b.jsx)(k.a,{variant:"h3",children:_.title}),Object(b.jsx)(k.a,{variant:"h6",children:_.subTitle})]}),action:H()}),Object(b.jsx)(w.a,{children:Object(b.jsx)("div",{id:"container",dangerouslySetInnerHTML:{__html:e.item.content}})}),Object(b.jsxs)(C.a,{className:T.cardActions,children:[Object(b.jsx)(z.a,{}),Object(b.jsx)(E.a,{id:"standard-multiline-flexible",label:"add comment",className:T.commentBox,multiline:!0,rowsMax:4,value:m,onChange:J}),Object(b.jsx)(W.a,{buttonProps:{text:"Save",onClick:D,loading:g}})]})]})})}))},e.item.timeStamp)},J=n(279),V=n(187),K=n(272),q=n.n(K),G=n(273),Q=n.n(G),U=Object(P.a)((function(e){return{post:{marginTop:30},postBody:{height:118,marginTop:-8,width:"100%"},postTitle:{height:50,background:"#ffa602"},retry:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"lighter",textAlign:"center"},sadIcon:{fontSize:"40px"},button:{margin:e.spacing(1)}}})),X=function(e){var t=e.responseData,n=e.retry,a=U(),r=function(){return n()},c=function(e){return 1===e&&t&&t.error?Object(b.jsxs)("div",{className:a.retry,onClick:r,children:[Object(b.jsx)(k.a,{variant:"label",children:"Something went wrong "}),Object(b.jsx)("br",{}),Object(b.jsx)(q.a,{className:a.sadIcon}),Object(b.jsx)("br",{}),Object(b.jsx)(V.a,{variant:"contained",color:"primary",className:a.button,endIcon:Object(b.jsx)(Q.a,{}),children:"Retry"})]}):Object(b.jsx)(J.a,{variant:"rect",className:a.postBody})};return Object(b.jsx)(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[1,2,3].map((function(e){return Object(b.jsxs)(f.a,{item:!0,xs:12,sm:9,className:a.post,children:[Object(b.jsx)(J.a,{variant:"text",className:a.postTitle}),c(e)]},e)}))})},Y=function(){var e=Object(a.useContext)(x),t=Object(a.useContext)(j.b),n=R();Object(a.useEffect)((function(){document.title="Blog"}),[]);if(!e||e&&e.error||e&&!e.posts)return Object(b.jsx)(X,{responseData:e,retry:function(){return e.retry()}});var c=e.posts;return Object(b.jsxs)(r.a.Fragment,{children:[t.isLoggedIn()?Object(b.jsx)("div",{className:n.fabAddBlog,children:Object(b.jsx)(O.a,{color:"primary","aria-label":"add",onClick:e.addNewBlog,children:Object(b.jsx)(g.a,{})})}):"",Object(b.jsx)(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:c.map((function(e){return Object(b.jsx)(f.a,{item:!0,xs:12,sm:9,className:n.post,children:Object(b.jsx)(D,{item:e},e._id)},e._id)}))})]})};t.default=function(){return Object(a.useContext)(x)?Object(b.jsx)(m,{children:Object(b.jsx)(Y,{})}):Object(b.jsx)("div",{children:"Loading..."})}}}]);
//# sourceMappingURL=4.ea5d8cb6.chunk.js.map