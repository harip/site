(this["webpackJsonphp-profile"]=this["webpackJsonphp-profile"]||[]).push([[4],{276:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),i=n(22),s=n.n(i),o=n(15),l=n(32),u=n(12),j=n(57),b=n(30),d={posts:null,error:!1,retry:function(){},save:function(){},addNewBlog:function(){},saveComment:function(){}},p=c.a.createContext(d),m=function(e){var t=e.children,n=Object(r.useContext)(b.b),c=Object(r.useState)(null),i=Object(u.a)(c,2),d=i[0],m=i[1];function x(){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=!1,e.prev=2,e.next=5,j.a.get("/post");case 5:a=e.sent,t=a.data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n=!0;case 12:m({posts:t,error:n});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(r.useEffect)((function(){x()}),[]);var O=function(){var e=Object(l.a)(s.a.mark((function e(t,a){var r,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(a._id=t),e.prev=1,e.next=4,j.a.put("/post",Object(o.a)(Object(o.a)({},a),{},{token:n.token}));case 4:return r=Object(o.a)({},d),c=r.posts,(i=c.findIndex((function(e){return e._id==="".concat(t)})))>=0&&(c.splice(i,1,a),m({posts:c,error:!1})),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={title:"",subTitle:"",content:"Enter text"},r=Object(o.a)({},d),(c=r.posts).unshift(a),m({posts:c,error:!1}),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.patch("/post",n);case 3:return e.sent,e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsx)(p.Provider,{value:Object(o.a)(Object(o.a)({},d),{},{retry:function(){return x()},addNewBlog:h,save:O,saveComment:g}),children:t})},x=p,f=n(245),O=n(247),h=n(270),g=n.n(h),v=n(231),y=n(243),w=n(232),C=n(244),k=n(36),N=n(272),T=[{title:"Image Left",selector:"pre",styles:{float:"left",margin:"0 10px 0 10px"}}],S=function(e){var t=e.post,n=Object(r.useState)(t.content),c=Object(u.a)(n,2),i=c[0],s=c[1];return Object(a.jsx)(N.a,{id:"codeEditor",apiKey:"wefhnu0ma6zh07117uwxwjj5ila4m1d1y16pp4e59wbc6log",initialValue:i,init:{height:500,style_formats:T,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code codesample image"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | codesample | image | code"},onEditorChange:function(e,n){s(e),t.newContent=e}})},B=n(274),I=n(230),_=n(266),A=n.n(_),L=n(267),F=n.n(L),E=n(250),H=n(265),z=n.n(H),W=n(112),M=n(271),P=n(180),R=Object(P.a)((function(e){return{card:{marginRight:5,marginBottom:5},post:{marginTop:30},root:{margin:10,display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5)},fabAddBlog:{marginTop:10,position:"fixed",marginLeft:"auto",zIndex:999},contactHeader:{fontSize:20,borderBottom:2,background:"#ffa602"},cardActions:{borderTop:"solid 1px #f9f5ee"},crudButtons:{marginLeft:"auto"},wrapper:{margin:e.spacing(1),position:"relative"},commentBox:{width:"100%"}}})),D=function(e){var t=Object(r.useContext)(b.b),n=Object(r.useContext)(x),i=Object(r.useState)(!1),s=Object(u.a)(i,2),l=s[0],j=s[1],d=Object(r.useState)(""),p=Object(u.a)(d,2),m=p[0],f=p[1],O=Object(r.useState)(!1),h=Object(u.a)(O,2),g=h[0],N=h[1],T=R(),_=e.item,L=Object(M.a)({initialValues:{title:_.title,subTitle:_.subTitle,content:_.content},onSubmit:function(e){console.log(e)}}),H=function(){return t.isLoggedIn()?Object(a.jsx)(B.a,{type:"submit",color:"primary","aria-label":"outlined primary button group",className:T.crudButtons,children:l?Object(a.jsx)(I.a,{"aria-label":"save",onClick:function(){return P()},color:"primary",children:Object(a.jsx)(F.a,{})}):Object(a.jsx)(I.a,{"aria-label":"edit",onClick:function(){return j(!l)},children:Object(a.jsx)(A.a,{})})}):null},P=function(){var t=Object(o.a)(Object(o.a)({},e.item),{},{title:L.values.title,subTitle:L.values.subTitle,content:e.item.newContent?e.item.newContent:e.item.content});n.save(e.item._id,t)&&j(!l)},D=function(){N(!0),n.saveComment(e.item._id,{_id:e.item._id,text:m}),N(!1)},J=function(e){f(e.target.value)};return Object(a.jsx)(c.a.Fragment,{children:(e.item,Object(a.jsx)("div",{className:T.wrapper,children:Object(a.jsx)("div",{className:T.card,children:l?Object(a.jsx)("form",{onSubmit:L.handleSubmit,children:Object(a.jsxs)(v.a,{children:[Object(a.jsx)(y.a,{className:T.contactHeader,title:Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(E.a,{autoFocus:!0,margin:"dense",id:"postTitle",label:"title",name:"title",type:"text",fullWidth:!0,value:L.values.title,onChange:L.handleChange}),Object(a.jsx)(E.a,{margin:"dense",name:"subTitle",id:"postSubTitle",label:"subTitle",type:"text",fullWidth:!0,value:L.values.subTitle,onChange:L.handleChange})]}),action:H()}),Object(a.jsx)(w.a,{children:Object(a.jsx)("div",{id:"container",children:Object(a.jsx)(S,{post:_})})}),Object(a.jsxs)(C.a,{className:T.cardActions,children:[Object(a.jsx)(z.a,{}),Object(a.jsx)(E.a,{id:"standard-multiline-flexible",label:"add comment",className:T.commentBox,multiline:!0,rowsMax:4,value:m,onChange:J}),Object(a.jsx)(W.a,{buttonProps:{text:"Save",onClick:D,loading:g}})]})]})}):Object(a.jsxs)(v.a,{children:[Object(a.jsx)(y.a,{className:T.contactHeader,title:Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(k.a,{variant:"h3",children:_.title}),Object(a.jsx)(k.a,{variant:"h6",children:_.subTitle})]}),action:H()}),Object(a.jsx)(w.a,{children:Object(a.jsx)("div",{id:"container",dangerouslySetInnerHTML:{__html:e.item.content}})}),Object(a.jsxs)(C.a,{className:T.cardActions,children:[Object(a.jsx)(z.a,{}),Object(a.jsx)(E.a,{id:"standard-multiline-flexible",label:"add comment",className:T.commentBox,multiline:!0,rowsMax:4,value:m,onChange:J}),Object(a.jsx)(W.a,{buttonProps:{text:"Save",onClick:D,loading:g}})]})]})})}))},e.item.timeStamp)},J=n(275),V=n(182),K=n(268),q=n.n(K),G=n(269),Q=n.n(G),U=Object(P.a)((function(e){return{post:{marginTop:30},postBody:{height:118,marginTop:-8,width:"100%"},postTitle:{height:50,background:"#ffa602"},retry:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"lighter",textAlign:"center"},sadIcon:{fontSize:"40px"},button:{margin:e.spacing(1)}}})),X=function(e){var t=e.responseData,n=e.retry,r=U(),c=function(){return n()},i=function(e){return 1===e&&t&&t.error?Object(a.jsxs)("div",{className:r.retry,onClick:c,children:[Object(a.jsx)(k.a,{variant:"label",children:"Something went wrong "}),Object(a.jsx)("br",{}),Object(a.jsx)(q.a,{className:r.sadIcon}),Object(a.jsx)("br",{}),Object(a.jsx)(V.a,{variant:"contained",color:"primary",className:r.button,endIcon:Object(a.jsx)(Q.a,{}),children:"Retry"})]}):Object(a.jsx)(J.a,{variant:"rect",className:r.postBody})};return Object(a.jsx)(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[1,2,3].map((function(e){return Object(a.jsxs)(f.a,{item:!0,xs:12,sm:9,className:r.post,children:[Object(a.jsx)(J.a,{variant:"text",className:r.postTitle}),i(e)]},e)}))})},Y=function(){var e=Object(r.useContext)(x),t=Object(r.useContext)(b.b),n=R();Object(r.useEffect)((function(){document.title="Blog"}),[]);if(!e||e&&e.error||e&&!e.posts)return Object(a.jsx)(X,{responseData:e,retry:function(){return e.retry()}});var i=e.posts;return Object(a.jsxs)(c.a.Fragment,{children:[t.isLoggedIn()?Object(a.jsx)("div",{className:n.fabAddBlog,children:Object(a.jsx)(O.a,{color:"primary","aria-label":"add",onClick:e.addNewBlog,children:Object(a.jsx)(g.a,{})})}):"",Object(a.jsx)(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:i.map((function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,sm:9,className:n.post,children:Object(a.jsx)(D,{item:e},e._id)},e._id)}))})]})};t.default=function(){return Object(r.useContext)(x)?Object(a.jsx)(m,{children:Object(a.jsx)(Y,{})}):Object(a.jsx)("div",{children:"Loading..."})}}}]);
//# sourceMappingURL=4.a7e4669d.chunk.js.map